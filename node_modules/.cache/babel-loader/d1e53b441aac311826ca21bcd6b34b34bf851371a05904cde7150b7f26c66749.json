{"ast":null,"code":"var _jsxFileName = \"/home/local/o22203433/HyperboleVisualizer/src/Components/compteur.js\",\n  _s = $RefreshSig$();\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Compteur({\n  size\n}) {\n  _s();\n  const [lastPoint, setLastPoint] = useState(null);\n  const [angle, setAngle] = useState(0);\n  const [position, setPosition] = useState({\n    x: '80%',\n    y: '70%'\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const collectionName = sessionStorage.getItem('collectionName') || '/';\n  useEffect(() => {\n    const pointsRef = ref(db, collectionName);\n    const unsubscribe = onValue(pointsRef, snapshot => {\n      const fetchedData = [];\n      snapshot.forEach(childSnapshot => {\n        fetchedData.push({\n          id: childSnapshot.key,\n          ...childSnapshot.val()\n        });\n      });\n      if (fetchedData.length > 0) {\n        setLastPoint(fetchedData[fetchedData.length - 1]);\n      }\n    }, error => {\n      console.error('Error fetching data: ', error);\n    });\n    return () => unsubscribe();\n  }, [collectionName]);\n  useEffect(() => {\n    const validVitesse = lastPoint !== null && lastPoint !== void 0 && lastPoint.V ? Math.max(0, Math.min(lastPoint.V, 100)) : 0;\n    const newAngle = validVitesse / 100 * 180;\n    const step = (newAngle - angle) / 10;\n    let currentAngle = angle;\n    const interval = setInterval(() => {\n      currentAngle += step;\n      if (Math.abs(currentAngle - newAngle) < Math.abs(step)) {\n        clearInterval(interval);\n        currentAngle = newAngle;\n      }\n      setAngle(currentAngle);\n    }, 50);\n    return () => clearInterval(interval);\n  }, [lastPoint, angle]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'absolute',\n      left: position.x,\n      top: position.y\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"compteur-box\",\n      style: {\n        width: `${size}px`,\n        height: `${size / 2}px`,\n        position: 'relative',\n        cursor: 'grab'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(Compteur, \"/tyG+4ywT67ofoTf3MYouIk/t5U=\");\n_c = Compteur;\nexport default Compteur;\nvar _c;\n$RefreshReg$(_c, \"Compteur\");","map":{"version":3,"names":["Compteur","size","_s","lastPoint","setLastPoint","useState","angle","setAngle","position","setPosition","x","y","isDragging","setIsDragging","collectionName","sessionStorage","getItem","useEffect","pointsRef","ref","db","unsubscribe","onValue","snapshot","fetchedData","forEach","childSnapshot","push","id","key","val","length","error","console","validVitesse","V","Math","max","min","newAngle","step","currentAngle","interval","setInterval","abs","clearInterval","_jsxDEV","style","left","top","children","className","width","height","cursor","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/local/o22203433/HyperboleVisualizer/src/Components/compteur.js"],"sourcesContent":["function Compteur({ size }) {\n  const [lastPoint, setLastPoint] = useState(null);\n  const [angle, setAngle] = useState(0);\n  const [position, setPosition] = useState({ x: '80%', y: '70%' });\n  const [isDragging, setIsDragging] = useState(false);\n\n  const collectionName = sessionStorage.getItem('collectionName') || '/';\n\n  useEffect(() => {\n    const pointsRef = ref(db, collectionName);\n    const unsubscribe = onValue(\n      pointsRef,\n      (snapshot) => {\n        const fetchedData = [];\n        snapshot.forEach((childSnapshot) => {\n          fetchedData.push({\n            id: childSnapshot.key,\n            ...childSnapshot.val(),\n          });\n        });\n\n        if (fetchedData.length > 0) {\n          setLastPoint(fetchedData[fetchedData.length - 1]);\n        }\n      },\n      (error) => {\n        console.error('Error fetching data: ', error);\n      }\n    );\n\n    return () => unsubscribe();\n  }, [collectionName]);\n\n  useEffect(() => {\n    const validVitesse = lastPoint?.V ? Math.max(0, Math.min(lastPoint.V, 100)) : 0;\n    const newAngle = (validVitesse / 100) * 180;\n\n    const step = (newAngle - angle) / 10;\n    let currentAngle = angle;\n    const interval = setInterval(() => {\n      currentAngle += step;\n      if (Math.abs(currentAngle - newAngle) < Math.abs(step)) {\n        clearInterval(interval);\n        currentAngle = newAngle;\n      }\n      setAngle(currentAngle);\n    }, 50);\n\n    return () => clearInterval(interval);\n  }, [lastPoint, angle]);\n\n  return (\n    <div style={{ position: 'absolute', left: position.x, top: position.y }}>\n      <div\n        className=\"compteur-box\"\n        style={{\n          width: `${size}px`,\n          height: `${size / 2}px`,\n          position: 'relative',\n          cursor: 'grab',\n        }}\n      >\n        {/* Votre SVG ici */}\n      </div>\n    </div>\n  );\n}\n\nexport default Compteur;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}