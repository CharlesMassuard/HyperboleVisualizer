{"ast":null,"code":"var _jsxFileName = \"/home/local/o22203433/HyperboleVisualizer/hyperbole_visualiser/src/Components/map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, Polyline, Marker, Popup } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CarMap = ({\n  points\n}) => {\n  _s();\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [currentTime, setCurrentTime] = useState(null);\n  const [iconSize, setIconSize] = useState([32, 32]);\n  console.log(points[0]);\n  const pointsWithLng = points.map(point => ({\n    lat: point.latitude,\n    lng: point.longitude,\n    time: point.time\n  }));\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentIndex(prevIndex => prevIndex < pointsWithLng.length - 1 ? prevIndex + 1 : prevIndex);\n      setCurrentTime(pointsWithLng[currentIndex].time);\n      if (currentIndex < pointsWithLng.length - 1) {\n        setIconSize([40, 40]);\n      } else {\n        setIconSize([32, 32]);\n      }\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [pointsWithLng, currentIndex]);\n  const currentPoint = pointsWithLng[currentIndex];\n  const path2 = pointsWithLng.slice(0, currentIndex + 1);\n\n  // Convertir en JSON\n  const path2JSON = JSON.stringify({\n    path2\n  }, null, 2);\n  console.log(path2JSON);\n  console.log(path2);\n\n  // Définir l'icône de la voiture avec une taille dynamique\n  const carIcon = new L.Icon({\n    iconUrl: \"https://img.icons8.com/ios/452/car.png\",\n    // Lien vers une icône de voiture (utilise une icône ou une image de ton choix)\n    iconSize: iconSize,\n    // Taille dynamique de l'icône\n    iconAnchor: [16, 32],\n    // Point d'ancrage de l'icône\n    popupAnchor: [0, -32] // Position du popup par rapport à l'icône\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: path2.length > 0 ?\n    /*#__PURE__*/\n    // Vérifie que path2 n'est pas vide\n    _jsxDEV(MapContainer, {\n      center: path2[0] // Centrage initial sur le premier point\n      ,\n      zoom: 18,\n      style: {\n        height: \"500px\",\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: path2,\n        color: \"blue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), currentPoint && /*#__PURE__*/_jsxDEV(Marker, {\n        position: currentPoint,\n        icon: carIcon,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Position actuelle de la voiture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Latitude:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 22\n              }, this), \" \", currentPoint.lat]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Longitude:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 22\n              }, this), \" \", currentPoint.lng]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Heure:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 22\n              }, this), \" \", currentTime]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Chargement des donn\\xE9es...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this) // Affiche un message pendant le chargement\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(CarMap, \"XM9xpO94gAqqhcG7XEcZWnVKUEo=\");\n_c = CarMap;\nexport default CarMap;\nvar _c;\n$RefreshReg$(_c, \"CarMap\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Polyline","Marker","Popup","L","jsxDEV","_jsxDEV","CarMap","points","_s","currentIndex","setCurrentIndex","currentTime","setCurrentTime","iconSize","setIconSize","console","log","pointsWithLng","map","point","lat","latitude","lng","longitude","time","interval","setInterval","prevIndex","length","clearInterval","currentPoint","path2","slice","path2JSON","JSON","stringify","carIcon","Icon","iconUrl","iconAnchor","popupAnchor","children","center","zoom","style","height","width","url","attribution","fileName","_jsxFileName","lineNumber","columnNumber","positions","color","position","icon","_c","$RefreshReg$"],"sources":["/home/local/o22203433/HyperboleVisualizer/hyperbole_visualiser/src/Components/map.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, Polyline, Marker, Popup } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\n\nconst CarMap = ({ points }) => {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [currentTime, setCurrentTime] = useState(null);\n  const [iconSize, setIconSize] = useState([32, 32]); \n\n  console.log(points[0]);\n\n  const pointsWithLng = points.map((point) => ({\n    lat: point.latitude,\n    lng: point.longitude,\n    time: point.time,\n  }));\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentIndex((prevIndex) =>\n        prevIndex < pointsWithLng.length - 1 ? prevIndex + 1 : prevIndex\n      );\n      setCurrentTime(pointsWithLng[currentIndex].time);\n      if (currentIndex < pointsWithLng.length - 1) {\n        setIconSize([40, 40]);\n      } else {\n        setIconSize([32, 32]);\n      }\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [pointsWithLng, currentIndex]);\n\n  const currentPoint = pointsWithLng[currentIndex];\n\n  const path2 = pointsWithLng.slice(0, currentIndex + 1);\n\n  // Convertir en JSON\n  const path2JSON = JSON.stringify({ path2 }, null, 2);\n\n  console.log(path2JSON);\n  console.log(path2);\n\n  // Définir l'icône de la voiture avec une taille dynamique\n  const carIcon = new L.Icon({\n    iconUrl: \"https://img.icons8.com/ios/452/car.png\", // Lien vers une icône de voiture (utilise une icône ou une image de ton choix)\n    iconSize: iconSize, // Taille dynamique de l'icône\n    iconAnchor: [16, 32], // Point d'ancrage de l'icône\n    popupAnchor: [0, -32], // Position du popup par rapport à l'icône\n  });\n\n  return (\n    <div>\n      {path2.length > 0 ? ( // Vérifie que path2 n'est pas vide\n        <MapContainer\n          center={path2[0]} // Centrage initial sur le premier point\n          zoom={18}\n          style={{ height: \"500px\", width: \"100%\" }}\n        >\n          {/* Couche de base OpenStreetMap */}\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            attribution=\"&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors\"\n          />\n\n          {/* Ligne entre les points */}\n          <Polyline positions={path2} color=\"blue\" />\n\n          {/* Marqueur pour la position actuelle avec l'icône personnalisée */}\n          {currentPoint && (\n            <Marker position={currentPoint} icon={carIcon}>\n              <Popup>\n                <div>\n                  <h4>Position actuelle de la voiture</h4>\n                  <p><strong>Latitude:</strong> {currentPoint.lat}</p>\n                  <p><strong>Longitude:</strong> {currentPoint.lng}</p>\n                  <p><strong>Heure:</strong> {currentTime}</p>\n                </div>\n              </Popup>\n            </Marker>\n          )}\n        </MapContainer>\n      ) : (\n        <p>Chargement des données...</p> // Affiche un message pendant le chargement\n      )}\n    </div>\n  );\n};\n\nexport default CarMap;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,YAAY,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,KAAK,QAAQ,eAAe;AAChF,OAAO,0BAA0B;AACjC,OAAOC,CAAC,MAAM,SAAS;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExB,MAAMC,MAAM,GAAGA,CAAC;EAAEC;AAAO,CAAC,KAAK;EAAAC,EAAA;EAC7B,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGb,QAAQ,CAAC,CAAC,CAAC;EACnD,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACgB,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;EAElDkB,OAAO,CAACC,GAAG,CAACT,MAAM,CAAC,CAAC,CAAC,CAAC;EAEtB,MAAMU,aAAa,GAAGV,MAAM,CAACW,GAAG,CAAEC,KAAK,KAAM;IAC3CC,GAAG,EAAED,KAAK,CAACE,QAAQ;IACnBC,GAAG,EAAEH,KAAK,CAACI,SAAS;IACpBC,IAAI,EAAEL,KAAK,CAACK;EACd,CAAC,CAAC,CAAC;EAEH5B,SAAS,CAAC,MAAM;IACd,MAAM6B,QAAQ,GAAGC,WAAW,CAAC,MAAM;MACjChB,eAAe,CAAEiB,SAAS,IACxBA,SAAS,GAAGV,aAAa,CAACW,MAAM,GAAG,CAAC,GAAGD,SAAS,GAAG,CAAC,GAAGA,SACzD,CAAC;MACDf,cAAc,CAACK,aAAa,CAACR,YAAY,CAAC,CAACe,IAAI,CAAC;MAChD,IAAIf,YAAY,GAAGQ,aAAa,CAACW,MAAM,GAAG,CAAC,EAAE;QAC3Cd,WAAW,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;MACvB,CAAC,MAAM;QACLA,WAAW,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;MACvB;IACF,CAAC,EAAE,IAAI,CAAC;IAER,OAAO,MAAMe,aAAa,CAACJ,QAAQ,CAAC;EACtC,CAAC,EAAE,CAACR,aAAa,EAAER,YAAY,CAAC,CAAC;EAEjC,MAAMqB,YAAY,GAAGb,aAAa,CAACR,YAAY,CAAC;EAEhD,MAAMsB,KAAK,GAAGd,aAAa,CAACe,KAAK,CAAC,CAAC,EAAEvB,YAAY,GAAG,CAAC,CAAC;;EAEtD;EACA,MAAMwB,SAAS,GAAGC,IAAI,CAACC,SAAS,CAAC;IAAEJ;EAAM,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;EAEpDhB,OAAO,CAACC,GAAG,CAACiB,SAAS,CAAC;EACtBlB,OAAO,CAACC,GAAG,CAACe,KAAK,CAAC;;EAElB;EACA,MAAMK,OAAO,GAAG,IAAIjC,CAAC,CAACkC,IAAI,CAAC;IACzBC,OAAO,EAAE,wCAAwC;IAAE;IACnDzB,QAAQ,EAAEA,QAAQ;IAAE;IACpB0B,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IAAE;IACtBC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE;EACzB,CAAC,CAAC;EAEF,oBACEnC,OAAA;IAAAoC,QAAA,EACGV,KAAK,CAACH,MAAM,GAAG,CAAC;IAAA;IAAK;IACpBvB,OAAA,CAACP,YAAY;MACX4C,MAAM,EAAEX,KAAK,CAAC,CAAC,CAAE,CAAC;MAAA;MAClBY,IAAI,EAAE,EAAG;MACTC,KAAK,EAAE;QAAEC,MAAM,EAAE,OAAO;QAAEC,KAAK,EAAE;MAAO,CAAE;MAAAL,QAAA,gBAG1CpC,OAAA,CAACN,SAAS;QACRgD,GAAG,EAAC,oDAAoD;QACxDC,WAAW,EAAC;MAAyF;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtG,CAAC,eAGF/C,OAAA,CAACL,QAAQ;QAACqD,SAAS,EAAEtB,KAAM;QAACuB,KAAK,EAAC;MAAM;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EAG1CtB,YAAY,iBACXzB,OAAA,CAACJ,MAAM;QAACsD,QAAQ,EAAEzB,YAAa;QAAC0B,IAAI,EAAEpB,OAAQ;QAAAK,QAAA,eAC5CpC,OAAA,CAACH,KAAK;UAAAuC,QAAA,eACJpC,OAAA;YAAAoC,QAAA,gBACEpC,OAAA;cAAAoC,QAAA,EAAI;YAA+B;cAAAQ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACxC/C,OAAA;cAAAoC,QAAA,gBAAGpC,OAAA;gBAAAoC,QAAA,EAAQ;cAAS;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACtB,YAAY,CAACV,GAAG;YAAA;cAAA6B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACpD/C,OAAA;cAAAoC,QAAA,gBAAGpC,OAAA;gBAAAoC,QAAA,EAAQ;cAAU;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACtB,YAAY,CAACR,GAAG;YAAA;cAAA2B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACrD/C,OAAA;cAAAoC,QAAA,gBAAGpC,OAAA;gBAAAoC,QAAA,EAAQ;cAAM;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACzC,WAAW;YAAA;cAAAsC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CACT;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACW,CAAC,gBAEf/C,OAAA;MAAAoC,QAAA,EAAG;IAAyB;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,CAAC;EAClC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC5C,EAAA,CAnFIF,MAAM;AAAAmD,EAAA,GAANnD,MAAM;AAqFZ,eAAeA,MAAM;AAAC,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}