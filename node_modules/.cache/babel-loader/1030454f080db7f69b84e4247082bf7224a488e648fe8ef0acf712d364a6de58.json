{"ast":null,"code":"var _jsxFileName = \"/home/local/o22203433/HyperboleVisualizer/hyperbole_visualiser/src/Components/map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, Polyline, Marker, Popup } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CarMap = ({\n  points\n}) => {\n  _s();\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [currentTime, setCurrentTime] = useState(null);\n  const [iconSize, setIconSize] = useState([32, 32]);\n  console.log(points[0]);\n  const pointsWithLng = points.filter(point => point.latitude !== undefined && point.longitude !== undefined && !isNaN(point.latitude) && !isNaN(point.longitude)).map(point => ({\n    lat: point.latitude,\n    lng: point.longitude,\n    time: point.time\n  }));\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentIndex(prevIndex => prevIndex < pointsWithLng.length - 1 ? prevIndex + 1 : prevIndex);\n      if (currentIndex !== undefined) {\n        setCurrentTime(pointsWithLng[currentIndex].time);\n      }\n      if (currentIndex < pointsWithLng.length - 1) {\n        setIconSize([40, 40]);\n      } else {\n        setIconSize([32, 32]);\n      }\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [pointsWithLng, currentIndex]);\n  const currentPoint = pointsWithLng[currentIndex];\n  const path2 = pointsWithLng.slice(0, currentIndex + 1);\n\n  // Convertir en JSON\n  const path2JSON = JSON.stringify({\n    path2\n  }, null, 2);\n  console.log(path2JSON);\n  console.log(path2);\n\n  // Définir l'icône de la voiture avec une taille dynamique\n  const carIcon = new L.Icon({\n    iconUrl: \"https://img.icons8.com/ios/452/car.png\",\n    // Lien vers une icône de voiture (utilise une icône ou une image de ton choix)\n    iconSize: iconSize,\n    // Taille dynamique de l'icône\n    iconAnchor: [16, 32],\n    // Point d'ancrage de l'icône\n    popupAnchor: [0, -32] // Position du popup par rapport à l'icône\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: path2.length > 0 ?\n    /*#__PURE__*/\n    // Vérifie que path2 n'est pas vide\n    _jsxDEV(MapContainer, {\n      center: path2[0] // Centrage initial sur le premier point\n      ,\n      zoom: 18,\n      style: {\n        height: \"500px\",\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: path2,\n        color: \"blue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), currentPoint && /*#__PURE__*/_jsxDEV(Marker, {\n        position: currentPoint,\n        icon: carIcon,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Position actuelle de la voiture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Latitude:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 22\n              }, this), \" \", currentPoint.lat]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Longitude:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 22\n              }, this), \" \", currentPoint.lng]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Heure:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 22\n              }, this), \" \", currentTime]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Chargement des donn\\xE9es...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this) // Affiche un message pendant le chargement\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(CarMap, \"XM9xpO94gAqqhcG7XEcZWnVKUEo=\");\n_c = CarMap;\nexport default CarMap;\nvar _c;\n$RefreshReg$(_c, \"CarMap\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Polyline","Marker","Popup","L","jsxDEV","_jsxDEV","CarMap","points","_s","currentIndex","setCurrentIndex","currentTime","setCurrentTime","iconSize","setIconSize","console","log","pointsWithLng","filter","point","latitude","undefined","longitude","isNaN","map","lat","lng","time","interval","setInterval","prevIndex","length","clearInterval","currentPoint","path2","slice","path2JSON","JSON","stringify","carIcon","Icon","iconUrl","iconAnchor","popupAnchor","children","center","zoom","style","height","width","url","attribution","fileName","_jsxFileName","lineNumber","columnNumber","positions","color","position","icon","_c","$RefreshReg$"],"sources":["/home/local/o22203433/HyperboleVisualizer/hyperbole_visualiser/src/Components/map.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, Polyline, Marker, Popup } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\n\nconst CarMap = ({ points }) => {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [currentTime, setCurrentTime] = useState(null);\n  const [iconSize, setIconSize] = useState([32, 32]); \n\n  console.log(points[0]);\n\n  const pointsWithLng = points.filter(\n    (point) =>\n      point.latitude !== undefined &&\n      point.longitude !== undefined &&\n      !isNaN(point.latitude) &&\n      !isNaN(point.longitude)\n    ).map((point) => ({\n      lat: point.latitude,\n      lng: point.longitude,\n      time: point.time,\n    }));\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentIndex((prevIndex) =>\n        prevIndex < pointsWithLng.length - 1 ? prevIndex + 1 : prevIndex\n      );\n      if (currentIndex !== undefined){\n        setCurrentTime(pointsWithLng[currentIndex].time);\n      }\n      if (currentIndex < pointsWithLng.length - 1) {\n        setIconSize([40, 40]);\n      } else {\n        setIconSize([32, 32]);\n      }\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [pointsWithLng, currentIndex]);\n\n  const currentPoint = pointsWithLng[currentIndex];\n\n  const path2 = pointsWithLng.slice(0, currentIndex + 1);\n\n  // Convertir en JSON\n  const path2JSON = JSON.stringify({ path2 }, null, 2);\n\n  console.log(path2JSON);\n  console.log(path2);\n\n  // Définir l'icône de la voiture avec une taille dynamique\n  const carIcon = new L.Icon({\n    iconUrl: \"https://img.icons8.com/ios/452/car.png\", // Lien vers une icône de voiture (utilise une icône ou une image de ton choix)\n    iconSize: iconSize, // Taille dynamique de l'icône\n    iconAnchor: [16, 32], // Point d'ancrage de l'icône\n    popupAnchor: [0, -32], // Position du popup par rapport à l'icône\n  });\n\n  return (\n    <div>\n      {path2.length > 0 ? ( // Vérifie que path2 n'est pas vide\n        <MapContainer\n          center={path2[0]} // Centrage initial sur le premier point\n          zoom={18}\n          style={{ height: \"500px\", width: \"100%\" }}\n        >\n          {/* Couche de base OpenStreetMap */}\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            attribution=\"&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors\"\n          />\n\n          {/* Ligne entre les points */}\n          <Polyline positions={path2} color=\"blue\" />\n\n          {/* Marqueur pour la position actuelle avec l'icône personnalisée */}\n          {currentPoint && (\n            <Marker position={currentPoint} icon={carIcon}>\n              <Popup>\n                <div>\n                  <h4>Position actuelle de la voiture</h4>\n                  <p><strong>Latitude:</strong> {currentPoint.lat}</p>\n                  <p><strong>Longitude:</strong> {currentPoint.lng}</p>\n                  <p><strong>Heure:</strong> {currentTime}</p>\n                </div>\n              </Popup>\n            </Marker>\n          )}\n        </MapContainer>\n      ) : (\n        <p>Chargement des données...</p> // Affiche un message pendant le chargement\n      )}\n    </div>\n  );\n};\n\nexport default CarMap;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}